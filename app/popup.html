<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!-- build:css styles/vendor.css -->
    <link href="styles/bootstrap.min.css" rel="stylesheet">
    <link href="styles/ripples.min.css" rel="stylesheet">
    <link href="styles/material-wfont.min.css" rel="stylesheet">
    <!-- endbuild -->
    <!-- build:css styles/main.css -->
    <link href="styles/main.css" rel="stylesheet">
    <!-- endbuild -->
</head>
<body id="popup">

<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
                <span class="navbar-brand" href="#">
                    <i class="mdi-action-query-builder"></i> kTime
                </span>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="active" id="goToMarcajes" data-div="kMarcajes"><a href="#">Marcajes</a></li>
                <li id="goToKiosko" data-div="kKiosko"><a href="#">Kiosko</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li id="goToConfig" data-div="kConfig"><a id="configButton2" href="#">
                    Configuración
                </a></li>
            </ul>

        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
</nav>

<div id="kMarcajes">
    <div id="progress" class="progress">
        <div class="progress-bar progress-bar-success" style="width: 0%"></div>
    </div>

    <!--<a href="#" id="prueba">Prueba</a>-->

    <div class="alert alert-danger" id="configStatus">
        Necesitas configurar la aplicación
    </div>
    <div class="alert alert-danger" id="loginFailed">
        Ha fallado el login, por favor configurar el sistema
    </div>
    <div class="alert alert-danger" id="cartel-data-outdated">
        Datos desactualizados. <a href="#" id="refreshButton2"><i class="mdi-av-loop"></i> Refrescar ahora</a>
    </div>

    <div id="marcajes-data" class="mtop10">
        <div class="alert alert-material-blue-grey-50 col-sm-5 nomargin">
            <strong>Hora estimada de salida:</strong> <span id="horaSalida">19:35</span>
        </div>
        <p class="text-right col-sm-7">
            <button id="configSaveButton" class="btn btn-success btn-xs nomargin mright"><i class="mdi-navigation-check"></i> Guardar cambios
            </button>
            <button id="desiredTableButton" class="btn btn-info btn-xs btn-raised nomargin mright10"><i class="mdi-device-access-time"></i> Tiempos deseados
            </button>
        </p>

        <table class="table">
            <thead>
            <tr class="config info">
                <th class="mini">Indica el tiempo que quieres realizar cada día. Semana:
                    <span id="horas-semana">0</span>h
                </th>
                <th class="form-group has-info">
                    <input data-day="lunes" type="time"
                           class="form-control text-center floating-label iVD"
                           placeholder="horas:minutos">

                    <p class="jornada"><label>
                        <input class="valignsub ipVD" data-day="lunes"
                               type="checkbox"/> jornada continua
                    </label></p>

                </th>
                <th class="form-group has-info">
                    <input data-day="martes" type="time"
                           class="form-control text-center floating-label iVD"
                           placeholder="horas:minutos">

                    <p class="jornada"><label>
                        <input class="valignsub ipVD" data-day="martes"
                               type="checkbox"/> jornada continua
                    </label></p>
                </th>
                <th class="form-group has-info">
                    <input data-day="miercoles" type="time"
                           class="form-control text-center floating-label iVD"
                           placeholder="horas:minutos">

                    <p class="jornada"><label>
                        <input class="valignsub ipVD" data-day="miercoles"
                               type="checkbox"/> jornada continua
                    </label></p>
                </th>
                <th class="form-group has-info">
                    <input data-day="jueves" type="time"
                           class="form-control text-center floating-label iVD"
                           placeholder="horas:minutos">

                    <p class="jornada"><label>
                        <input class="valignsub ipVD" data-day="jueves"
                               type="checkbox"/> jornada continua
                    </label></p>
                </th>
                <th class="form-group has-info">
                    <input data-day="viernes" type="time"
                           class="form-control text-center floating-label iVD"
                           placeholder="horas:minutos">

                    <p class="jornada"><label>
                        <input class="valignsub ipVD" data-day="viernes"
                               type="checkbox"/> jornada continua
                    </label></p>
                </th>
            </tr>
            <tr class="dates"></tr>
            </thead>

            <tfoot>
            <tr class="row-restante active">
                <!--<th>Restante</th>-->
                <!--<td data-day="lunes"></td>-->
                <!--<td data-day="martes"></td>-->
                <!--<td data-day="miercoles"></td>-->
                <!--<td data-day="jueves"></td>-->
                <!--<td data-day="viernes"></td>-->
            </tr>
            </tfoot>

            <tbody>
            <tr class="row-marcas"></tr>

            <tr class="row-descontar danger top4">
                <th class="vertical">
                    <p data-toggle="tooltip" data-placement="right" title="Inglés, comida...">Descontado</p>
                </th>
                <td class="form-group has-warning">
                    <input data-day="lunes" type="number"
                           class="form-control text-center floating-label iTD"
                           placeholder="minutos">
                </td>
                <td class="form-group has-warning">
                    <input data-day="martes" type="number"
                           class="form-control text-center floating-label iTD"
                           placeholder="minutos">
                </td>
                <td class="form-group has-warning">
                    <input data-day="miercoles" type="number"
                           class="form-control text-center floating-label iTD"
                           placeholder="minutos">
                </td>
                <td class="form-group has-warning">
                    <input data-day="jueves" type="number"
                           class="form-control text-center floating-label iTD"
                           placeholder="minutos">
                </td>
                <td class="form-group has-warning">
                    <input data-day="viernes" type="number"
                           class="form-control text-center floating-label iTD"
                           placeholder="minutos">
                </td>
            </tr>

            <tr class="row-retribuido success">
                <th class="vertical">
                    <p data-toggle="tooltip" data-placement="right"
                       title="Ausencias justificadas que no aparecen como retribuidas en el tiempo Hecho">Retribuido</p>

                    <p class="mini">No desayuno</p>
                </th>
                <td>
                    <input data-day="lunes" type="number"
                           class="form-control text-center floating-label iTR"
                           placeholder="minutos">
                </td>
                <td>
                    <input data-day="martes" type="number"
                           class="form-control text-center floating-label iTR"
                           placeholder="minutos">
                </td>
                <td>
                    <input data-day="miercoles" type="number"
                           class="form-control text-center floating-label iTR"
                           placeholder="minutos">
                </td>
                <td>
                    <input data-day="jueves" type="number"
                           class="form-control text-center floating-label iTR"
                           placeholder="minutos">
                </td>
                <td>
                    <input data-day="viernes" type="number"
                           class="form-control text-center floating-label iTR"
                           placeholder="minutos">
                </td>
            </tr>

            <tr class="row-hecho active top4"></tr>
            </tbody>
        </table>

        <div class="row">
            <p class="col-sm-1"></p>

            <p class="col-sm-4 lastUpdateTime text-info" data-toggle="tooltip" title="Tiempo hasta el último marcaje de entrada de la semana">
                Tiempo hecho esta semana <span id="weekTime"></span>
            </p>

            <p class="col-sm-1"></p>

            <p class="text-right lastUpdateTime col-sm-5">Última actualización: <span
                    id="actualizado"></span></p>

            <p class="col-sm-1" id="ayuda" data-toggle="modal" data-target="#help-dialog" title="No me entero de nada, ¡ayúdame!">
                <i class="mdi-action-help"></i>
            </p>
        </div>
    </div>
</div>

<div id="kIFrame">
    <!-- http://srv-tornos/EVALOSNET/SuiteKiosko/Kiosco.htm-->
    <iframe id="iframe" src="" width="800px" height="500px" frameborder="0"></iframe>
</div>


<div id="help-dialog" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">¿Cómo funciona esto?</h4>
            </div>
            <div class="modal-body">
                <div class="help-scroll">
                    <p>Una vez configurada la aplicación, para que los datos del tiempo restante y hecho sean correctos, debes indicar el
                        <span class="text-info">Tiempo deseado</span>
                        que quieres hacer cada día. Indica también en el mismo sitio si cada día corresponde a jornada continua o partida.
                    </p>

                    <p><strong class="text-primary">kTime</strong> obtiene la información de fichajes del Kiosko y la procesa teniendo en cuenta lo siguiente:
                    </p>
                    <ul>
                        <li>No se tiene en cuenta el tiempo hecho antes de las <strong>8:00</strong> ni después de las <strong>21:00</strong>.</li>
                        <li><strong class="text-primary">kTime</strong> detecta ciertos fichajes especiales, siempre que existan los pares entrada-salida del
                            fichaje *, y retribuye el tiempo transcurrido en dichos fichajes. El tiempo retribuido automáticamente se indica con iconos en la
                            fila de tiempo Hecho. Los códigos detectados son:
                            <ul>
                                <li>Salud:
                                    <ul>
                                        <li><span class="text-primary negrita">002</span> - Ausencia por enfermedad</li>
                                        <li><span class="text-primary negrita">003</span> - Asistencia a consulta médica</li>
                                        <li><span class="text-primary negrita">014</span> - Asistencia a reconocimiento médico periódico</li>
                                    </ul>
                                </li>

                                <li>Formación:
                                    <ul>
                                        <li><span class="text-primary negrita">001</span> - Asistencia a clases</li>
                                        <li><span class="text-primary negrita">005</span> - Asistencia a exámenes</li>
                                        <li><span class="text-primary negrita">006</span> - Realización de cursos incluidos en el plan de formación</li>
                                        <li><span class="text-primary negrita">007</span> - Impartición de cursos del plan de formación</li>
                                    </ul>
                                </li>

                                <li>Familia:
                                    <ul>
                                        <li><span class="text-primary negrita">011</span> - Permiso por lactancia</li>
                                        <li><span class="text-primary negrita">012</span> - Permiso para exámenes prenatales</li>
                                        <li><span class="text-primary negrita">013</span> - Permiso para cursos de preparación al parto</li>
                                        <li><span class="text-primary negrita">015</span> - Urgencia familiar</li>
                                    </ul>
                                </li>

                                <li>Otros:
                                    <ul>
                                        <li><span class="text-primary negrita">006</span> - Desayuno en jornada continua</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>

                    <p class="text-muted lastUpdateTime">* Si sólo existe un fichaje, por ejemplo salida a consulta médica y ya con eso termina la jornada, no
                        se detecta ni se retribuye. En ese caso habrá que añadir esos minutos de forma manual en el campo Retribuido.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" data-dismiss="modal">Entendido</button>
            </div>
        </div>
    </div>
</div>

<!--<div id="kConfig">-->
<!--<iframe id="iframeConfig" src="" width="800px" height="500px"-->
<!--frameborder="0"></iframe>-->
<!--</div>-->

<!-- build:js scripts/vendor.js -->
<script src="scripts/utils.js"></script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/bootstrap.min.js"></script>
<script src="scripts/ripples.min.js"></script>
<script src="scripts/material.min.js"></script>
<!-- endbuild -->

<!-- build:js scripts/popup.js -->
<script src="scripts/popup.js"></script>
<!-- endbuild -->

</body>
</html>
